operation = "service_command"

[init]
  action = "proceed"
  on_success = "executing"

[executing]
  action = "proceed"
  on_success = "run"

[run]
  script = "execute-service-action.sh ${.payload.command} ${.payload.serviceName} '${.topic.root_prefix}/${.topic.target}'"
  on_success = "successful"
  on_error = { status = "failed", reason = "Command returned a non-zero exit code" }

[successful]
  action = "cleanup"

[failed]
  action = "cleanup"
